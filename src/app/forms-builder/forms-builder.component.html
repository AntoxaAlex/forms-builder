<!--Main container for forms-builder-->
<div [class.main-container]=true>
<!-- Accordion Component -->
  <app-forms-builder-accordion
    [class.accordion]=true
    [accordionPortal]="accordionPortal"
    [isFormStyleActive]="accordionData.isFormStyleActive"
    [accordionData]="accordionData.isFormStyleActive ? accordionData.formStyle : accordionData.fieldStyle"
    [cdkPortalOutlet]="cdkPortalOutlet"
  ></app-forms-builder-accordion>
<!-- Drop Area Component -->
  <div [class.drag-drop-section]=true>
    <app-forms-builder-drop-area
      [dropAreaPortal]="dropAreaPortal"
      [cdkPortalOutlet]="cdkPortalOutlet"
      [class.drop-section]=true
      [style.padding]="accordionData.formStyle.padding + 'px'"
      [style.backgroundColor]="accordionData.formStyle.backgroundColor"
      (mouseenter)="isDragging ? isDragItemEnter=true : isDragItemEnter=false"
      (mouseleave)="isDragItemEnter=false"
    ></app-forms-builder-drop-area>
<!--  Drag Area Component  -->
    <app-forms-builder-drag-area
      [dragAreaPortal]="dragAreaPortal"
      [cdkPortalOutlet]="cdkPortalOutlet"
      [class.drag-section]=true
      [cdkDragDropped]="cdkDragDropped"
      [cdkDragStarted]="cdkDragStarted"
    ></app-forms-builder-drag-area>
  </div>
</div>

<!--Portal Templates-->

<!--Accordion Portal Content-->
<ng-template #accordionPortalContent>
  <div *ngIf="accordionData.isFormStyleActive; else filedStyling">
    <div [class.accordion-container]=true>
      <label for="formPadding">Padding</label>
      <mat-slider
        class="example-margin"
        id="formPadding"
        [max]=100
        [min]=0
        [step]=1
        [thumbLabel]=true
        [(ngModel)]="accordionData.formStyle.padding"
        aria-labelledby="example-name-label">
      </mat-slider>
    </div>
    <div [class.accordion-container]=true>
      <label for="formBackgroundColor">Background Color</label>
      <mat-form-field id="formBackgroundColor" class="example-form-field" appearance="fill">
        <input matInput type="color" [(ngModel)]="accordionData.formStyle.backgroundColor">
      </mat-form-field>
    </div>
  </div>
  <ng-template #filedStyling>
    <p>Field styling</p>
  </ng-template>
</ng-template>

<!--Drag Area Portal Content-->
<ng-template #dragAreaPortalContent>
  <div
    cdkDropList
    class="drag-item-list"
  >
    <mat-form-field id="drag-input" #dragInput class="example-full-width" appearance="fill" cdkDrag (cdkDragDropped)="drop($event)" (cdkDragStarted)="isDragging=true">
      <mat-label>Input</mat-label>
      <input matInput disabled>
    </mat-form-field>
    <mat-form-field id="drag-textarea" #dragTextarea class="example-full-width" appearance="fill" cdkDrag (cdkDragDropped)="drop($event)" (cdkDragStarted)="isDragging=true">
      <mat-label>Textarea</mat-label>
      <textarea matInput placeholder="Ex. 100 Main St" disabled>text</textarea>
    </mat-form-field>
    <button id="drag-button" #dragButton mat-button cdkDrag (cdkDragDropped)="drop($event)" (cdkDragStarted)="isDragging=true">Button</button>
    <mat-checkbox id="drag-checkbox" #dragCheck class="example-margin" disabled cdkDrag (cdkDragDropped)="drop($event)" (cdkDragStarted)="isDragging=true">Checkbox</mat-checkbox>
    <mat-form-field id="drag-select" #dragSelect appearance="fill" cdkDrag (cdkDragDropped)="drop($event)" (cdkDragStarted)="isDragging=true">
      <mat-label>Select</mat-label>
      <mat-select disabled>
        <mat-option>Select option</mat-option>
      </mat-select>
    </mat-form-field>
  </div>
</ng-template>

<!--Drop Area Portal Content-->
<ng-template #dropAreaPortalContent>
  <div
    id="drop-list"
    cdkDropList
    #dropList="cdkDropList"
    [cdkDropListData]="dropElements"
    class="example-list"
    (cdkDropListDropped)="drop($event)">
    <div class="example-box" *ngFor="let element of dropElements" cdkDrag>
      <div class="dropped-item" [style]="{top:element.y+'px',left:element.x+'px'}" *ngIf="element.elementId==='drag-input'">
        <mat-form-field id="drag-input" #dragInput class="example-full-width" appearance="fill" cdkDrag>
          <mat-label>Change text</mat-label>
          <input matInput (click)="customiseInput($event)">
        </mat-form-field>
      </div>
      <div class="dropped-item"  *ngIf="element.elementId==='drag-textarea'" [style]="{top:element.y+'px',left:element.x+'px'}">
        <mat-form-field id="drag-text" #dragTextarea class="example-full-width" appearance="fill" cdkDrag>
          <textarea matInput placeholder="Change text"></textarea>
        </mat-form-field>
      </div>
      <div class="dropped-item"  *ngIf="element.elementId==='drag-button'" [style]="{top:element.y+'px',left:element.x+'px'}">
        <button #dragButton mat-button cdkDrag>Button</button>
      </div>
      <div class="dropped-item"  *ngIf="element.elementId==='drag-checkbox'" [style]="{top:element.y+'px',left:element.x+'px'}">
        <mat-checkbox id="drag-check" #dragCheck class="example-margin" cdkDrag>Checkbox</mat-checkbox>
      </div>
      <div class="dropped-item"  *ngIf="element.elementId==='drag-select'" [style]="{top:element.y+'px',left:element.x+'px'}">
        <mat-form-field id="drag-select" #dragSelect appearance="fill" cdkDrag (click)="customiseInput($event)">
          <mat-label>Select</mat-label>
          <mat-select>
            <mat-option>
              Select Option 1
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </div>
  </div>
</ng-template>
